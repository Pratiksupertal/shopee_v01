<div class="print-heading">
<h2>Delivery Note<br>
<small>{{ doc.name }}</small>
</h2><br>
<h2 style="font-size:12px">Sales Order Number<br></h2>
{% set str=namespace(against_sales_order="") %}
{% for row in doc.items %}
   {% set str.sales_order= row.against_sales_order%}
{% endfor %}
<h2 style="font-size:12px">{{ str.sales_order }}
<h2>
</div>
<div class="row section-break f_font">
  <div class="col-xs-6">
    <table width="100%" style="table-layout: fixed;">
      <tr>
        <td width="40%"><b>Customer Name</b></td>
        <td width="60%"><b>{{ doc.customer_name or '' }}</b></td>
      </tr>
    </table>
  </div>
  <div class="col-xs-6">
	<table width="100%" style="table-layout: fixed;">
      <tr>
        <td width="40%"><b>Date</b></td>
        <td width="60%"><b>{{ frappe.utils.formatdate(doc.get_formatted('posting_date'), "dd-mm-yyyy") }}</b></td>
      </tr>
    </table>
  </div>
</div>
<div class="row section-break f_font">
  <div class="col-xs-5">
	<table width="100%" style="table-layout: fixed;">
	  <tr>
		<td width="40%">{% if doc.pick_list is not none %} Pick List {% endif %}</td>
		<td width="60%"></td>
	  </tr>
	</table>
  </div>
  <div class="col-xs-7">
	<table width="100%" style="table-layout: fixed;">
	  <tr>
		<td width="40%">{% if doc.pick_list is not none %} {{doc.pick_list}} {% endif %}</td>
		<td width="60%"></td>
	  </tr>
	</table>
  </div>
</div>
<div class="row section-break f_font">
  <div class="col-xs-6">
    <table width="100%" style="table-layout: fixed;">
      <tr>
        <td width="40%">{% if doc.shipping_address is not none %} Shipping Address {% endif %}</td>
        <td width="60%"><b>{% if doc.shipping_address is not none %} {{ doc.shipping_address or '' }} {% endif %}</b></td>
      </tr>
    </table>
  </div>
  <div class="col-xs-6">
	<table width="100%" style="table-layout: fixed;">
      <tr>
        <td width="40%"></td>
        <td width="60%"></td>
      </tr>
    </table>
  </div>
</div>
<div class="row section-break f_font">
  <div class="col-xs-6">
    <table width="100%" style="table-layout: fixed;">
      <tr>
        <td width="40%">{% if doc.contact_display is not none %} Contact {% endif %}</td>
        <td width="60%"><b>{% if doc.contact_display is not none %} {{ doc.contact_display or '' }} {% endif %}</b></td>
      </tr>
    </table>
  </div>
  <div class="col-xs-6">
	<table width="100%" style="table-layout: fixed;">
      <tr>
        <td width="40%">{% if doc.address_display != "" %} Billing Address {% endif %}</td>
        <td width="60%">{% if doc.address_display != "" %} {{ doc.address_display or '' }} {% endif %}</td>
      </tr>
    </table>
  </div>
</div>
<div class="row section-break f_font">
  <div class="col-xs-6">
    <table width="100%" style="table-layout: fixed;">
      <tr>
        <td width="40%">{% if doc.contact_mobile is not none %} Mobile No {% endif %}</td>
        <td width="60%"><b>{% if doc.contact_mobile is not none  %} {{ doc.contact_mobile or '' }}{% endif %}</b></td>
      </tr>
    </table>
  </div>
  <div class="col-xs-6">
	<table width="100%" style="table-layout: fixed;">
      <tr>
        <td width="40%">{% if doc.company_address is not none  %} Company Address {% endif %}</td>
        <td width="60%">{% if doc.company_address is not none %} {{ doc.company_address or '' }} {% endif %}</td>
      </tr>
    </table>
  </div>
</div>

{% set uom=namespace(uom_name="") %}
{% set disc=namespace(discount=0) %}
<br><table width="100%" style="table-layout: auto;" border="1px" bordercolor="#d1d8dd">
    <tr>
        <th class="tac" width="6%"><b>Sr.</b></th>
        <th class="tac" width="18%"><b>Item Code</b></th>
        <th class="tac" width="18%"><b>Description</b></th>
        <th class="tac" width="15%"><b>Quantity</b></th>
        <th class="tac" width="15%"><b>Weight/Unit</b></th>
        <th class="tac" width="10%"><b>Total Weight</b></th>
    </tr>
{% for row in doc.items %}

<tr>
        <td class="tac" width="6%">{{ row.idx or '' }}</td>
        <td width="18%">{{ row.item_code or '' }}</td>
        <td width="18%">{{ row.description or '' }}</td>
        <td class="tac" width="15%"> {{ row.get_formatted("qty") or 0}}&nbsp; {{row.uom}}</td>
        <td class="tac" width="15%">{{ row.weight_per_unit }}</td>
        <td class="tac" width="10%">{{ row.total_weight }}</td>

    </tr>
    {% set discount = row.discount_amount %}
    {% set disc.discount=disc.discount+ discount %}
{% endfor %}

</table><br>
<div class="row section-break f_font">
  {% set tot_disc = disc.discount+doc.discount_amount %}
  {% set tot_ppn = doc.grand_total - (doc.total - tot_disc) %}
  {% set fmt_tot_disc = frappe.utils.fmt_money(tot_disc,currency="") %}
  {% set fmt_total_qty = frappe.utils.fmt_money(doc.total_qty,currency="") %}
  {% set fmt_total = frappe.utils.fmt_money(doc.total,currency="") %}
  {% set fmt_net_total = frappe.utils.fmt_money(doc.net_total,currency="") %}
  {% set fmt_grand_total = frappe.utils.fmt_money(doc.grand_total,currency="") %}
  {% set fmt_rounded_total = frappe.utils.fmt_money(doc.rounded_total,currency="") %}
  {% set tot_disc = disc.discount+doc.discount_amount %}
  {% set fmt_tot_disc = frappe.utils.fmt_money(tot_disc,currency="") %}
  {% set fmt_tot_tax = frappe.utils.fmt_money(doc.total_taxes_and_charges,currency="") %}
  <div class="col-xs-7">
    <table width="100%" style="table-layout: fixed;">
      <tr>
        <td width="40%"><b>Total Quantity</b></td>
        <td width="30%"><b></b></td>
          <td width="20%"><b></b></td>
        <!--<td width="60%"><b>{{ fmt_total_qty or '' }}&nbsp;{{uom.uom_name}}</b></td>-->
        <td width="10%"><b>{{ doc.total_qty or '' }}&nbsp;{{uom.uom_name}}</b></td>
      </tr>
    </table>
  </div>
  <div class="col-xs-5">
    <table width="100%" style="table-layout: fixed;">
      <tr>
        <td colspan="40%"><b>Total</b></td>
        <td colspan="60%">{{doc.currency}}&nbsp;{{ fmt_total or '' }}</td>
      </tr>
    </table>
  </div>
</div>
{% set fmt_tot_tax = frappe.utils.fmt_money(tot_ppn,currency="") %}
{% set fmt_grand_total = frappe.utils.fmt_money(doc.grand_total,currency="") %}
{% set fmt_rounded_total = frappe.utils.fmt_money(doc.rounded_total,currency="") %}
<div class="row section-break f_font">
  <div class="col-xs-7">
  </div>
  <div class="col-xs-5">
    <table width="100%" style="table-layout: fixed;">
      <tr>
        <td colspan="40%"><b>PPN Keluaran</b></td>
        <td colspan="60%">{{doc.currency}}&nbsp;{{ fmt_tot_tax or '' }}</td>
      </tr>
    </table>
  </div>
</div>
<div class="row section-break f_font">
  <div class="col-xs-7">
  </div>
  <div class="col-xs-5">
    <table width="100%" style="table-layout: fixed;">
      <tr>
        <td colspan="40%"><b>Additional Discount Amount</b></td>
        <td colspan="60%">{{doc.currency}}&nbsp;{{ fmt_tot_disc or '' }}</td>
      </tr>
    </table>
  </div>
</div>
<div class="row section-break f_font">
  <div class="col-xs-7">
  </div>
  <div class="col-xs-5">
    <table width="100%" style="table-layout: fixed;">
      <tr>
        <td colspan="40%"><b>Grand Total</b></td>
        <td colspan="60%">{{doc.currency}}&nbsp;{{ fmt_grand_total or '' }}</td>
      </tr>
    </table>
  </div>
</div>
<div class="row section-break f_font">
  <div class="col-xs-7">
  </div>
  <div class="col-xs-5">
    <table width="100%" style="table-layout: fixed;">
      <tr>
        <td colspan="40%"><b>Rounded Total</b></td>
        <td colspan="60%">{{doc.currency}}&nbsp;{{ fmt_rounded_total or '' }}</td>
      </tr>
    </table>
  </div>
</div>
<div class="row section-break f_font">
  <div class="col-xs-7">
  </div>
  <div class="col-xs-5">
    <table width="100%" style="table-layout: fixed;">
      <tr>
        <td colspan="40%"><b>Terbilang</b></td>
        <td colspan="60%">{{ doc.in_words or '' }}</td>
      </tr>
    </table>
  </div>
</div>
